<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="Schulwege" content="GTA-Projekt für Velo-Schulwege" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GTA-Projekt Schulwege</title>

    <!-- With "link rel stylesheet", you can import CSS files. -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton&family=Source+Sans+3&display=swap"
      rel="stylesheet"
    />

    <!-- With script tags you can import JavaScript files. Defer makes sure that the browser does not wait until
         the script is completely loaded, but instead executes it once the HTML is downloaded and parsed. -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
      defer
    ></script>
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
      defer
    ></script>
    <script src="js/main.js" defer></script>
  </head>
  <body onload="onload()">
    <header>GTA-Projekt Schulwege</header>
    <div class="content">
      <div id="map"></div>
    </div>

    <!-- Fragezeichen Button oben rechts -->
    <button id="infoBtn" class="info-btn" onclick="toggleIntroPopup()">
      ?
    </button>

    <!-- Einleitungspopup -->
    <div id="introPopup" class="intro-popup">
      <div class="intro-popup-content">
        <h1>Wie funktioniert die App?</h1>
        <p>
          Willkommen! Diese App zeichnet Routen auf und hilft Schulwege und
          Veloinfrastruktur zu bewerten
        </p>
        <ul>
          <li><strong>Start Trip:</strong> Beginne eine neue Reise.</li>
          <li>
            <strong>End Trip:</strong> Beende die aktuelle Reise und bewerte den
            Verlauf.
          </li>
          <li>
            <strong>Rate School:</strong> Bewerte die Einrichtungen der Schule
            für Velofahrer*innen.
          </li>
        </ul>
        <h3>Legende</h3>
        <div class="legend-box">
          <!-- Schulstandort -->
          <div class="legend-item">
            <img
              src="https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png"
              class="legend-icon"
            />
            <span>Schulstandort</span>
          </div>

          <!-- Velovorzugsroute -->
          <div class="legend-item">
            <div class="legend-line"></div>
            <span>Velovorzugsroute</span>
          </div>
        </div>
        <button onclick="closeIntroPopup()">Schließen</button>
      </div>
    </div>

    <!-- Start / End Trip Button -->
    <a href="#" class="infusr-pb-button" id="tripBtn" onclick="toggleTrip()"
      >Aufzeichnen</a
    >

    <!-- Rate School Button -->
    <a href="#" class="infusr-pb-button" id="rateBtn" onclick="openRatePopup()"
      >Schule Bewerten</a
    >

    <div id="popupTrip" class="popup">
      <div class="popup-content">
        <h2>Rate Trip</h2>
        <div class="question">
          <label>Was war es für eine Strasse?</label>
          <label>
            <input type="radio" name="strassetyp" value="Hauptstrasse" />
            Hauptstrasse<br />
            <input type="radio" name="strassetyp" value="Quartierweg" />
            Quartierweg<br />
            <input type="radio" name="strassetyp" value="Tram" /> Strasse mit
            Tram<br />
          </label>
        </div>
        <div class="question">
          <label>Höchste Geschwindigkeitsbegrenzung</label>
          <label>
            <input type="radio" name="geschwindigkeit" value="20" /> 20
            <input type="radio" name="geschwindigkeit" value="30" /> 30
            <input type="radio" name="geschwindigkeit" value="50" /> 50
          </label>
        </div>
        <div class="question">
          <label>Wie gut war der Velostreifen/Veloweg</label>
          <input
            type="range"
            min="1"
            max="5"
            value="3"
            id="velostreifen"
            oninput="updateValue('abgetrennt', this.value)"
          />
          <div class="slider-labels">
            <span>schlecht</span>
            <span>gut</span>
          </div>
        </div>
        <!-- Container für zusätzliche Option -->
        <div
          class="question"
          id="velowegExtra"
          style="display: none; margin-left: 20px"
        ></div>

        <div class="question">
          <label>Viele Ampeln?</label>
          <input
            type="range"
            min="1"
            max="5"
            value="3"
            id="ampel"
            oninput="updateValue('Ampeln', this.value)"
          />
          <div class="slider-labels">
            <span>wenig</span>
            <span>viel</span>
          </div>
        </div>
        <div class="question">
          <label
            >Wie gross ist das Verkehrsaufkommen</label
          >
          <input
            type="range"
            min="1"
            max="5"
            value="3"
            id="aufkommen"
            oninput="updateValue('Verkehrsaufkommen', this.value)"
          />
          <div class="slider-labels">
            <span>klein</span>
            <span>gross</span>
          </div>
        </div>

        <div class="trip-buttons">
          <button onclick="continueTracking()" class="btn-gray">
            Weiter tracken
          </button>
          <button onclick="submitTripRating()" class="btn-blue">
            Bewerten
          </button>
          <button onclick="cancelTripPopup()" class="btn-red">Abbrechen</button>
        </div>
      </div>
    </div>

    <!-- Popup Rate School -->
    <div id="popupRate" class="popup">
      <div class="popup-content">
        <h2>Rate School</h2>

        <!-- JA/NEIN Fragen -->
        <div class="question">
          <label>Hat es einen Veloparkplatz?</label>
          <label>
            <input
              type="radio"
              name="veloparkplatz"
              value="True"
              onclick="toggleVeloPP(true)"
            />
            Ja
            <input
              type="radio"
              name="veloparkplatz"
              value="False"
              onclick="toggleVeloPP(false)"
            />
            Nein
          </label>
        </div>
        <div id="parkplatz" style="display: block">
          <div class="question">
            <label>Ist dieser wettergeschützt?</label>
            <label>
              <input type="radio" name="Wettergeschuetzt" value="True" /> Ja
              <input type="radio" name="Wettergeschuetzt" value="False" /> Nein
            </label>
          </div>

          <div class="question">
            <label>Kann man das Velo anschliessen?</label>
            <label>
              <input type="radio" name="anschliessen" value="True" /> Ja
              <input type="radio" name="anschliessen" value="False" /> Nein
            </label>
          </div>
          <div class="question">
            <label>Findest du den Parkplatz benutzerfreundlich?</label>
            <input type="range" min="1" max="5" value="3" id="qualitaet" />
            <div class="slider-labels">
            <span>schlecht</span>
            <span>gut</span>
          </div>
          </div>
          <div class="question">
            <label>Hat es viele Parkplätze?</label>
            <input type="range" min="1" max="5" value="3" id="anzahl" />
            <div class="slider-labels">
            <span>wenig</span>
            <span>viel</span>
          </div>
          </div>

          <div class="question">
            <label>Wie gut ist der Parkplatz von der Strasse erreichbar?</label>
            <input type="range" min="1" max="5" value="3" id="ErreichbarStra" />
            <div class="slider-labels">
            <span>schlecht</span>
            <span>gut</span>
          </div>
          </div>

          <div class="question">
            <label
              >Wie gut ist der Schuleingang vom Parkplatz erreichbar?</label
            >
            <input type="range" min="1" max="5" value="3" id="ErreichbarSchu" />
            <div class="slider-labels">
            <span>schlecht</span>
            <span>gut</span>
          </div>
          </div>
        </div>

        <div>
          <button onclick="startRating()">Absenden</button>
          <button onclick="closePopup('popupRate')" style="margin-top: 10px">
            Schliessen
          </button>
        </div>
      </div>
    </div>

    <footer id="map-attribution">
      © <a href="https://www.openstreetmap.org/copyright" target="_blank">
      OpenStreetMap
        </a> contributors
      <div>
        IKG @ ETH Zürich
      </div>
    </footer>
  </body>
</html>
